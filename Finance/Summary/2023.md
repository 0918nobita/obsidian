```chart
type: bar
labels: [9,10,11]
series:
  - title: 収支
    data: [102780, 45182, -9735]
beginAtZero: true
```
```dataview
TABLE WITHOUT ID
    file.name AS "費目",
    dateformat(date, "MM/dd") as "日付",
    tags[0] AS "支出/収入",
    amount as "金額"
FROM (#支出 OR #収入) AND !"Template"
WHERE date.year = 2023 
```
```dataviewjs
const result = await dv.query(`
    TABLE WITHOUT ID
        date.month,
        choice(contains(tags, "支出"), amount * -1, amount)
    FROM (#支出 OR #収入) AND !"Template"
    WHERE date.year = 2023
`);
if (result.successful) {
    const { values } = result.value;
    const incomePerMonth =
        values.reduce(
            (acc, [month, income]) => {
		        acc.set(
			        month,
			        acc.has(month) ? acc.get(month) + income : income
			    );
		        return acc;
		    },
		    new Map()
		);
	const entries = [...incomePerMonth.entries()];
	entries.sort(([m1], [m2]) => {
		if (m1 < m2) return -1;
		if (m1 > m2) return 1;
		return 0;
	});
	const chartData = {
		type: 'bar',
		data: {
			labels: entries.map(([month]) => month),
			datasets: [
				{
					label: entries.map(([month]) => month),
					data: entries.map(([, income]) => income),
				},
			],
		},
	};
	console.log(chartData);
	window.renderChart(chartData, this.container);
} else {
    dv.paragraph(`~~~~~\n${result.error}\n~~~~~`);
}
```
